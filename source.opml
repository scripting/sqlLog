<?xml version="1.0" encoding="ISO-8859-1"?>
<!-- OPML generated by OPML Editor v10.1b19 on Sat, 21 Dec 2024 17:16:42 GMT -->

<!-- 
   Hi this is Dave Winer. I write all my project code in an outliner, which 
   generates all the files that make up this GitHub project. You'll see a 
   source.opml file like this in each of my projects. It contains the outline 
   source that the repo files were generated from. This is the most logical place 
   to store them. You can read the code in any outliner that supports OPML, which 
   includes https://drummer.land. You can use the Open URL command in 
   Drummer's File menu to open the "raw" version of this file straight from the 
   GitHub repo.
 -->

<opml version="2.0">
	<head>
		<title>nodeEditor: sqlLog</title>
		<dateCreated>Sat, 21 Dec 2024 16:37:10 GMT</dateCreated>
		<dateModified>Sat, 21 Dec 2024 17:16:42 GMT</dateModified>
		<ownerName>Dave Winer</ownerName>
		<ownerId>http://davewiner.com/</ownerId>
		<expansionState>1, 3, 4, 12, 17, 30, 34, 36</expansionState>
		<vertScrollState>1</vertScrollState>
		<windowTop>254</windowTop>
		<windowLeft>666</windowLeft>
		<windowBottom>916</windowBottom>
		<windowRight>1773</windowRight>
		</head>
	<body>
		<outline text="/scripting.com/code/sqllog/" created="Sat, 21 Dec 2024 15:44:20 GMT">
			<outline text="worknotes.md" created="Sat, 21 Dec 2024 15:54:56 GMT">
				<outline text="#### 12/21/24; 10:55:00 AM by DW" created="Sat, 21 Dec 2024 15:54:59 GMT">
					<outline text="create table log (">
						<outline text="id int auto_increment primary key, "/>
						<outline text="eventName varchar (255) not null default '',"/>
						<outline text="eventError varchar (1023) not null default '',"/>
						<outline text="eventData json," created="Sat, 07 Dec 2024 15:17:24 GMT"/>
						<outline text="whenCreated datetime not null default current_timestamp"/>
						<outline text=");"/>
						</outline>
					</outline>
				</outline>
			<outline text="package.json" created="Sat, 21 Dec 2024 15:44:40 GMT">
				<outline text="{">
					<outline text="&quot;name&quot;: &quot;sqllog&quot;,"/>
					<outline text="&quot;description&quot;: &quot;Implements a log table for an SQL app.&quot;," created="Fri, 02 Jul 2021 14:57:59 GMT"/>
					<outline text="&quot;author&quot;: &quot;Dave Winer &lt;dave@scripting.com&gt;&quot;,"/>
					<outline text="&quot;version&quot;: &quot;0.4.2&quot;,"/>
					<outline text="&quot;license&quot;: &quot;MIT&quot;,"/>
					<outline text="&quot;repository&quot;: {">
						<outline text="&quot;type&quot;: &quot;git&quot;,"/>
						<outline text="&quot;url&quot;: &quot;https://github.com/scripting/xxx.git&quot;"/>
						<outline text="},"/>
						</outline>
					<outline text="&quot;main&quot;: &quot;log.js&quot;,"/>
					<outline text="&quot;dependencies&quot; : {">
						<outline text="&quot;daveutils&quot;: &quot;*&quot;,"/>
						<outline text="&quot;davesql&quot;: &quot;*&quot;" created="Mon, 08 Mar 2021 15:15:44 GMT"/>
						<outline text="} "/>
						</outline>
					<outline text="}"/>
					</outline>
				</outline>
			<outline text="log.js" created="Sat, 21 Dec 2024 15:44:46 GMT">
				<outline text="const myVersion = &quot;0.4.2&quot;, myProductName = &quot;sqlLog&quot;; " created="Mon, 03 Feb 2014 03:21:03 GMT" pgfnum="36831"/>
				<outline text="" created="Sat, 21 Dec 2024 15:47:23 GMT"/>
				<outline text="exports.addToLog = addToLog; " created="Sat, 21 Dec 2024 15:47:23 GMT"/>
				<outline text="exports.getRecentLogItems = getRecentLogItems; " created="Sat, 21 Dec 2024 15:47:23 GMT"/>
				<outline text="exports.start = start; " created="Sat, 21 Dec 2024 15:47:23 GMT"/>
				<outline text="" created="Sat, 21 Dec 2024 17:05:59 GMT"/>
				<outline text="const fs = require (&quot;fs&quot;);" created="Sat, 05 Mar 2022 17:19:07 GMT"/>
				<outline text="const utils = require (&quot;daveutils&quot;); "/>
				<outline text="const davesql = require (&quot;davesql&quot;); "/>
				<outline text="" created="Sat, 21 Dec 2024 15:52:17 GMT"/>
				<outline text="var config = {" created="Sat, 21 Dec 2024 15:52:17 GMT">
					<outline text="maxFeedItems: 100" created="Sat, 21 Dec 2024 16:17:57 GMT"/>
					<outline text="};" created="Sat, 21 Dec 2024 15:52:20 GMT"/>
					</outline>
				<outline text=""/>
				<outline text="function addToLog (eventName, err, eventData, callback) { //12/7/24 by DW">
					<outline text="const theLogItem = {" created="Sat, 07 Dec 2024 15:22:24 GMT">
						<outline text="eventName, " created="Sat, 07 Dec 2024 15:22:49 GMT"/>
						<outline text="eventData," created="Sat, 07 Dec 2024 15:24:22 GMT"/>
						<outline text="eventError: &quot;&quot;," created="Sat, 07 Dec 2024 15:32:31 GMT"/>
						<outline text="whenCreated: new Date ()" created="Sat, 07 Dec 2024 15:24:26 GMT"/>
						<outline text="};" created="Sat, 07 Dec 2024 15:22:32 GMT"/>
						</outline>
					<outline text="if (err) {" created="Sat, 21 Dec 2024 15:56:09 GMT">
						<outline text="theLogItem.eventError = err.message;" created="Sat, 21 Dec 2024 15:56:20 GMT"/>
						<outline text="}" created="Sat, 21 Dec 2024 15:56:16 GMT"/>
						</outline>
					<outline text="var sqltext = &quot;insert into log &quot; + davesql.encodeValues (theLogItem);"/>
					<outline text="davesql.runSqltext (sqltext, function (err, result) {">
						<outline text="if (err) {" created="Sat, 07 Dec 2024 15:23:41 GMT">
							<outline text="if (callback !== undefined) {" created="Sat, 07 Dec 2024 15:30:42 GMT">
								<outline text="callback (err);" created="Sat, 07 Dec 2024 15:23:44 GMT"/>
								<outline text="}" created="Sat, 07 Dec 2024 15:30:47 GMT"/>
								</outline>
							<outline text="}" created="Sat, 07 Dec 2024 15:23:48 GMT"/>
							</outline>
						<outline text="else {" created="Sat, 07 Dec 2024 15:23:49 GMT">
							<outline text="rssChanged (); //12/10/24 by DW" isComment="true" created="Tue, 10 Dec 2024 16:07:34 GMT"/>
							<outline text="if (callback !== undefined) {" created="Sat, 07 Dec 2024 15:31:18 GMT">
								<outline text="callback (undefined, theLogItem);" created="Sat, 07 Dec 2024 15:24:08 GMT"/>
								<outline text="}" created="Sat, 07 Dec 2024 15:31:18 GMT"/>
								</outline>
							<outline text="}" created="Sat, 07 Dec 2024 15:23:51 GMT"/>
							</outline>
						<outline text="});"/>
						</outline>
					<outline text="}"/>
					</outline>
				<outline text="function getRecentLogItems (callback) {" created="Sat, 07 Dec 2024 16:06:26 GMT">
					<outline text="const sqltext = &quot;select * from log order by id desc limit &quot; + config.maxFeedItems + &quot;;&quot;; "/>
					<outline text="davesql.runSqltext (sqltext, function (err, rows) {">
						<outline text="if (err) {">
							<outline text="callback (err);"/>
							<outline text="}"/>
							</outline>
						<outline text="else {">
							<outline text="var theItems = new Array ();" created="Sat, 07 Dec 2024 16:15:27 GMT"/>
							<outline text="rows.forEach (function (item) {" created="Sat, 07 Dec 2024 16:15:43 GMT">
								<outline text="var jstruct;" created="Sat, 07 Dec 2024 16:23:11 GMT"/>
								<outline text="" created="Sat, 07 Dec 2024 16:24:10 GMT"/>
								<outline text="try {" created="Sat, 07 Dec 2024 16:23:20 GMT">
									<outline text="jstruct = JSON.parse (item.eventData);" created="Sat, 07 Dec 2024 16:23:25 GMT"/>
									<outline text="}" created="Sat, 07 Dec 2024 16:23:38 GMT"/>
									</outline>
								<outline text="catch (err) {" created="Sat, 07 Dec 2024 16:23:40 GMT">
									<outline text="jstruct = undefined;" created="Sat, 07 Dec 2024 16:23:49 GMT"/>
									<outline text="}" created="Sat, 07 Dec 2024 16:23:44 GMT"/>
									</outline>
								<outline text="" created="Sat, 07 Dec 2024 16:24:08 GMT"/>
								<outline text="theItems.push ({" created="Sat, 07 Dec 2024 16:15:58 GMT">
									<outline text="id: item.id," created="Sat, 07 Dec 2024 16:16:14 GMT"/>
									<outline text="eventName: item.eventName," created="Sat, 07 Dec 2024 16:16:14 GMT"/>
									<outline text="eventError: (item.eventError.length == 0) ? undefined : JSON.parse (item.eventError)," created="Sat, 07 Dec 2024 16:16:14 GMT"/>
									<outline text="eventData: (jstruct) ? jstruct : undefined," created="Sat, 07 Dec 2024 16:16:14 GMT"/>
									<outline text="whenCreated: item.whenCreated" created="Sat, 07 Dec 2024 16:16:21 GMT"/>
									<outline text="});" created="Sat, 07 Dec 2024 16:16:02 GMT"/>
									</outline>
								<outline text="});" created="Sat, 07 Dec 2024 16:15:53 GMT"/>
								</outline>
							<outline text="callback (undefined, theItems);" created="Sat, 07 Dec 2024 16:17:19 GMT"/>
							<outline text="}"/>
							</outline>
						<outline text="});"/>
						</outline>
					<outline text="}" created="Sat, 07 Dec 2024 16:06:43 GMT"/>
					</outline>
				<outline text="" created="Sat, 21 Dec 2024 15:51:14 GMT"/>
				<outline text="function start (userOptions, callback) {" created="Sat, 21 Dec 2024 15:51:14 GMT">
					<outline text="utils.mergeOptions (userOptions, config);" created="Sat, 21 Dec 2024 15:52:01 GMT"/>
					<outline text="if (callback !== undefined) {" created="Sat, 21 Dec 2024 15:52:28 GMT">
						<outline text="callback ();" created="Sat, 21 Dec 2024 15:52:33 GMT"/>
						<outline text="}" created="Sat, 21 Dec 2024 15:52:35 GMT"/>
						</outline>
					<outline text="}" created="Sat, 21 Dec 2024 15:51:23 GMT"/>
					</outline>
				</outline>
			<outline text="readme.md" created="Sat, 21 Dec 2024 16:32:42 GMT">
				<outline text="# sqlLog" created="Sat, 21 Dec 2024 16:32:46 GMT">
					<outline text="Builds on davesql package, adds a very simple log table to your database, and provides a way to get back a list of recent operations. " created="Sat, 21 Dec 2024 16:32:49 GMT"/>
					</outline>
				<outline text="### The log table" created="Sat, 21 Dec 2024 16:33:22 GMT">
					<outline text="&lt;%includeExample (&quot;createTable&quot;)%&gt;"/>
					</outline>
				</outline>
			</outline>
		<outline text="build script" created="Sat, 21 Dec 2024 16:37:27 GMT">
			<outline text="nodeEditorSuite.utilities.buildSqllog ()" created="Tue, 17 Dec 2024 23:26:15 GMT"/>
			</outline>
		</body>
	</opml>
